import{r as v,u as D,a as y,w as F,c as j,b as q,o as x,d as k,e,f as V,g as C,h as o,i as z,j as d,v as S,m as u,k as m,t as c,n as U,l as L,p as $,q as G,s as H,C as I,_ as J,x as K,y as O,R as Q}from"./index-BeZIy28K.js";const W={class:"log-p"},X={class:"container"},Y={class:"log-p__inner"},Z={class:"log-p__content"},ss={class:"log-p__top"},es={class:"log-p__subtitle"},ts={class:"form__items"},os={class:"item-form"},as={"data-error":""},ls={class:"item-form"},is={"data-error":""},ns=["type"],rs={"data-error":""},ds={class:"form__footer"},us={class:"checkbox"},ms={"data-error":""},cs=["disabled"],gs={__name:"RegPage",setup(ps){const w=v(""),p=v(!1),i=v(!1),A={login:t=>t?!0:"Заполните поле",email:async t=>{if(t)if(K(t))if(w.value!=t)try{const{data:s}=await y.getUser(t);return s.length>0?(w.value=t,"Пользователь с таким email уже существует"):!0}catch(s){console.log(s)}else return"Пользователь с таким email уже существует";else return"Некорректный E-mail";else return"Заполните поле"},password:t=>t?O(t)?!0:"Пароль должен содержать минимум 6 символов":"Заполните поле",agree:t=>t===!0?!0:"Требуется согласие"},{errors:n,handleSubmit:B,isSubmitting:b,defineField:r}=D({validationSchema:A}),[_,R]=r("login"),[g,E]=r("email"),[l,M]=r("password"),[f,N]=r("agree"),P=q(),T=()=>{i.value=!i.value},h=B(async t=>{const s={email:t.email,login:t.login,password:t.password};try{await y.setUser(s),P.push("/login")}catch(a){console.log(a)}});return F(()=>l.value,()=>{p.value=l.value.length>0}),(t,s)=>(x(),j(J,null,{default:k(()=>[e("section",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ss,[s[8]||(s[8]=e("h1",null,"Регистрация",-1)),e("p",es,[s[7]||(s[7]=V(" Уже зарегистрированы? ")),C(o(Q),{to:"/login",class:"link"},{default:k(()=>s[6]||(s[6]=[V("Войти")])),_:1})])]),e("form",{class:"form",onSubmit:s[5]||(s[5]=z((...a)=>o(h)&&o(h)(...a),["prevent"]))},[e("div",ts,[e("div",os,[d(e("input",u({type:"text",placeholder:"Логин","onUpdate:modelValue":s[0]||(s[0]=a=>m(_)?_.value=a:null)},o(R)),null,16),[[S,o(_)]]),e("div",as,c(o(n).login),1)]),e("div",ls,[d(e("input",u({type:"email",placeholder:"E-mail",name:"mail","onUpdate:modelValue":s[1]||(s[1]=a=>m(g)?g.value=a:null)},o(E)),null,16),[[S,o(g)]]),e("div",is,c(o(n).email),1)]),e("div",{class:U(["item-form item-form--password",{"show-eyeBtn":p.value,"show-password":i.value}])},[d(e("input",u({type:i.value?"text":"password",placeholder:"Пароль",name:"password","onUpdate:modelValue":s[2]||(s[2]=a=>m(l)?l.value=a:null)},o(M),{autocomplete:"off"}),null,16,ns),[[L,o(l)]]),e("div",rs,c(o(n).password),1),p.value?(x(),$("button",{key:0,type:"button",class:"btn-reset item-form__eye",onClick:s[3]||(s[3]=()=>T())})):G("",!0)],2)]),e("div",ds,[e("div",us,[d(e("input",u({name:"agree",type:"checkbox",id:"result",class:"checkbox-input","onUpdate:modelValue":s[4]||(s[4]=a=>m(f)?f.value=a:null)},o(N)),null,16),[[H,o(f)]]),s[9]||(s[9]=e("label",{for:"result",class:"checkbox-label"},"Даю согласие на обработку персональных данных",-1)),e("div",ms,c(o(n).agree),1)]),e("button",{class:"btn-reset main-btn",type:"submit",disabled:o(b)},[e("span",{class:U(o(b)&&"loading")},"Зарегистрироваться",2)],8,cs)])],32),C(I)])])])])]),_:1}))}};export{gs as default};
