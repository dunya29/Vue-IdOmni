import{A as k,u as B,r as p,a as C,B as x,w as m,c as A,d as P,_ as V,b as R,Y as D,o as _,e as s,i as M,n as f,j as N,l as q,h as o,m as F,k as T,t as j,p as z,q as E,g as U,C as Y,y as $}from"./index-BtGB_OIj.js";const G={class:"log-p"},H={class:"container"},I={class:"log-p__inner"},J={class:"log-p__content"},K={class:"form__items"},L=["type"],O={"data-error":""},Q={class:"form__footer"},W=["disabled"],ss={__name:"RecoveryPage",setup(X){const r=k(),v={password:a=>a?$(a)?!0:"Пароль должен содержать минимум 6 символов":"Заполните поле"},i=R(),g=D(),{errors:h,handleSubmit:w,isSubmitting:u,defineField:y}=B({validationSchema:v}),[t,b]=y("password"),d=p(!1),l=p(!1),S=()=>{l.value=!l.value},c=w(async a=>{const e=g.query.email;try{await C.recoveryPassword(e,a.password),i.push({name:"login"})}catch(n){console.log(n)}});return x(()=>{r.logged&&i.push({name:"catalog"})}),m(()=>r.logged,()=>{r.logged&&i.push({name:"catalog"})}),m(()=>t.value,()=>{d.value=t.value.length>0}),(a,e)=>(_(),A(V,null,{default:P(()=>[s("section",G,[s("div",H,[s("div",I,[s("div",J,[e[3]||(e[3]=s("div",{class:"log-p__top"},[s("h1",null,"Новый пароль"),s("p",null,"Придумайте новый пароль для входа в свой аккаунт")],-1)),s("form",{class:"form",onSubmit:e[2]||(e[2]=M((...n)=>o(c)&&o(c)(...n),["prevent"])),novalidate:""},[s("div",K,[s("div",{class:f(["item-form item-form--password",{"show-eyeBtn":d.value,"show-password":l.value}])},[N(s("input",F({type:l.value?"text":"password",placeholder:"Пароль",name:"password","onUpdate:modelValue":e[0]||(e[0]=n=>T(t)?t.value=n:null)},o(b),{autocomplete:"off"}),null,16,L),[[q,o(t)]]),s("div",O,j(o(h).password),1),d.value?(_(),z("button",{key:0,type:"button",class:"btn-reset item-form__eye",onClick:e[1]||(e[1]=()=>S())})):E("",!0)],2)]),s("div",Q,[s("button",{class:"btn main-btn",type:"submit",disabled:o(u)},[s("span",{class:f(o(u)&&"loading")},"Ок",2)],8,W)])],32),U(Y)])])])])]),_:1}))}};export{ss as default};
