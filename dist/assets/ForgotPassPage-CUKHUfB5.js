import{A as b,r as m,u as w,a as _,B as y,w as S,c as x,d as A,_ as V,b as B,o as C,e,i as E,j as P,v as k,h as a,m as F,k as M,t as D,n as N,g as R,C as U,x as j}from"./index-BtGB_OIj.js";const z={class:"log-p"},T={class:"container"},$={class:"log-p__inner"},q={class:"log-p__content"},G={class:"form__items"},H={class:"item-form"},I={"data-error":""},J={class:"form__footer"},K=["disabled"],Q={__name:"ForgotPassPage",setup(L){const o=b(),r=m(""),c=m(""),p={email:async t=>{if(t)if(j(t))if(c.value!=t)if(r.value!=t)try{const{data:s}=await _.getUser(t);return s.length==0?(c.value=t,"Пользователь с таким email не найден"):(r.value=t,!0)}catch(s){console.log(s)}else return!0;else return"Пользователь с таким email не найден";else return"Некорректный E-mail";else return"Заполните поле"}},{errors:f,handleSubmit:g,isSubmitting:u,defineField:h}=w({validationSchema:p}),[i,v]=h("email"),l=B(),d=g(async t=>{try{await _.forgotPassword(t.email),l.push({name:"recovery"})}catch(s){console.log(s)}});return y(()=>{o.logged&&l.push({name:"catalog"})}),S(()=>o.logged,()=>{o.logged&&l.push({name:"catalog"})}),(t,s)=>(C(),x(V,null,{default:A(()=>[e("section",z,[e("div",T,[e("div",$,[e("div",q,[s[2]||(s[2]=e("div",{class:"log-p__top"},[e("h1",null,"Забыли пароль?"),e("p",null,"Введите адрес электронной почты, на которой вы зарегистрировались, и мы вышлем ссылку для сброса пароля ")],-1)),e("form",{class:"form",onSubmit:s[1]||(s[1]=E((...n)=>a(d)&&a(d)(...n),["prevent"])),novalidate:""},[e("div",G,[e("div",H,[P(e("input",F({type:"email",placeholder:"E-mail",name:"mail","onUpdate:modelValue":s[0]||(s[0]=n=>M(i)?i.value=n:null)},a(v)),null,16),[[k,a(i)]]),e("div",I,D(a(f).email),1)])]),e("div",J,[e("button",{class:"btn main-btn",type:"submit",disabled:a(u)},[e("span",{class:N(a(u)&&"loading")},"Отправить ссылку",2)],8,K)])],32),R(U)])])])])]),_:1}))}};export{Q as default};
