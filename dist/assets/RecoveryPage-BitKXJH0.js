import{u as S,a as k,r as u,b as C,A as x,w as A,c as B,e as P,_ as V,d as R,Y as D,o as p,f as s,j as M,n as m,k as N,p as q,i as t,m as z,l as F,t as T,q as j,s as E,h as U,C as Y,z as $}from"./index-_u9tgNaj.js";const G={class:"log-p"},H={class:"container"},I={class:"log-p__inner"},J={class:"log-p__content"},K={class:"form__items"},L=["type"],O={"data-error":""},Q={class:"form__footer"},W=["disabled"],ss={__name:"RecoveryPage",setup(X){const _=S(),f={password:a=>a?$(a)?!0:"Пароль должен содержать минимум 6 символов":"Заполните поле"},i=R(),v=D(),{errors:w,handleSubmit:h,isSubmitting:d,defineField:y}=k({validationSchema:f}),[o,g]=y("password"),l=u(!1),r=u(!1),b=()=>{r.value=!r.value},c=h(async a=>{const e=v.query.email;try{await C.recoveryPassword(e,a.password),i.push("/recovery-success")}catch(n){console.log(n)}});return x(()=>{_.logged&&i.push({name:"catalog"})}),A(()=>o.value,()=>{l.value=o.value.length>0}),(a,e)=>(p(),B(V,null,{default:P(()=>[s("section",G,[s("div",H,[s("div",I,[s("div",J,[e[3]||(e[3]=s("div",{class:"log-p__top"},[s("h1",null,"Новый пароль"),s("p",null,"Придумайте новый пароль для входа в свой аккаунт")],-1)),s("form",{class:"form",onSubmit:e[2]||(e[2]=M((...n)=>t(c)&&t(c)(...n),["prevent"])),novalidate:""},[s("div",K,[s("div",{class:m(["item-form item-form--password",{"show-eyeBtn":l.value,"show-password":r.value}])},[N(s("input",z({type:r.value?"text":"password",placeholder:"Пароль",name:"password","onUpdate:modelValue":e[0]||(e[0]=n=>F(o)?o.value=n:null)},t(g),{autocomplete:"off"}),null,16,L),[[q,t(o)]]),s("div",O,T(t(w).password),1),l.value?(p(),j("button",{key:0,type:"button",class:"btn-reset item-form__eye",onClick:e[1]||(e[1]=()=>b())})):E("",!0)],2)]),s("div",Q,[s("button",{class:"btn main-btn",type:"submit",disabled:t(d)},[s("span",{class:m(t(d)&&"loading")},"Ок",2)],8,W)])],32),U(Y)])])])])]),_:1}))}};export{ss as default};
